{% extends 'base.html' %}
{% load sass_tags %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% sass_src 'deps/css/auth.scss' %}" />
{% endblock %}

{% block content %}
<main class="auth-main">
  <div class="auth-container">
    <div class="auth-header">
      <h1 data-translate="login_title">Login</h1>
      <p data-translate="login_or_not_account">Access your furniture store account</p>
    </div>

    <form action="{% url 'users:login' %}" method="post">
      {% csrf_token %}
      {% if request.GET.next %}
      <input type="hidden" name="next" value="{{ request.GET.next }}" />  
      {% endif %}

      <div class="form-field">
        <label for="id_username" data-translate="login_username">Username</label>
        <input 
          type="text" 
          name="username" 
          id="id_username"
          placeholder="Enter your username"
          value="{% if form.username.value %}{{ form.username.value }}{% endif %}"
          required />
        {% if form.username.errors %}
          <div class="field-error">
            {% for error in form.username.errors %}
              {{ error }}<br>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <div class="form-field">
        <label for="id_password" data-translate="login_password">Password</label>
        <input 
          type="password" 
          name="password" 
          id="id_password"
          placeholder="Enter your password"
          required />
        {% if form.password.errors %}
          <div class="field-error">
            {% for error in form.password.errors %}
              {{ error }}<br>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <div class="form-field captcha-field">
        <label data-translate="captcha_label">Verify you're human</label>
        <div class="captcha-wrapper">
          {{ form.captcha }}
        </div>
        {% if form.captcha.errors %}
          <div class="field-error">
            {% for error in form.captcha.errors %}
              {{ error }}<br>
            {% endfor %}
          </div>
        {% endif %}
        {% if form.non_field_errors %}
          <div class="field-error">
            {% for error in form.non_field_errors %}
              {{ error }}<br>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <button type="submit" class="auth-button" data-translate="login_button">Sign In</button>
    </form>

    <div class="auth-divider">
      <span data-translate="login_or">Or</span>
    </div>

    <div class="auth-links">
      <span data-translate="dont_have_account">Don't have an account?</span>
      <a href="{% url 'users:registration' %}" data-translate="login_register">Create one</a>
    </div>

    <div class="social-login">
      <p data-translate="login_or_connect">Or continue with</p>
      <div class="social-buttons">
        <a href="#" class="social-btn">
          <img src="{% static 'deps/icons/google.svg' %}" alt="Google" />
          <span>Google</span>
        </a>
        <a href="#" class="social-btn">
          <img src="{% static 'deps/icons/facebook.svg' %}" alt="Facebook" />
          <span>Facebook</span>
        </a>
        <a href="#" class="social-btn">
          <img src="{% static 'deps/icons/github.svg' %}" alt="GitHub" />
          <span>GitHub</span>
        </a>
      </div>
    </div>
  </div>
</main>
{% endblock %}
